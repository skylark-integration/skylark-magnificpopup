/**
 * skylark-magnificpopup - A version of magnificpopup that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-magnificpopup/
 * @license MIT
 */
define(["skylark-jquery","./core"],function(e){var t=function(e){var t=mfp.items.length;return e>t-1?e-t:e<0?t+e:e},r=function(e,t,r){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,r)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var t=mfp.st.gallery,n=".mfp-gallery";if(mfp.direction=!0,!t||!t.enabled)return!1;_wrapClasses+=" mfp-gallery",_mfpOn(OPEN_EVENT+n,function(){t.navigateByImgClick&&mfp.wrap.on("click"+n,".mfp-img",function(){if(mfp.items.length>1)return mfp.next(),!1}),_document.on("keydown"+n,function(e){37===e.keyCode?mfp.prev():39===e.keyCode&&mfp.next()})}),_mfpOn("UpdateStatus"+n,function(e,t){t.text&&(t.text=r(t.text,mfp.currItem.index,mfp.items.length))}),_mfpOn(MARKUP_PARSE_EVENT+n,function(e,n,i,p){var f=mfp.items.length;i.counter=f>1?r(t.tCounter,p.index,f):""}),_mfpOn("BuildControls"+n,function(){if(mfp.items.length>1&&t.arrows&&!mfp.arrowLeft){var r=t.arrowMarkup,n=mfp.arrowLeft=e(r.replace(/%title%/gi,t.tPrev).replace(/%dir%/gi,"left")).addClass(PREVENT_CLOSE_CLASS),i=mfp.arrowRight=e(r.replace(/%title%/gi,t.tNext).replace(/%dir%/gi,"right")).addClass(PREVENT_CLOSE_CLASS);n.click(function(){mfp.prev()}),i.click(function(){mfp.next()}),mfp.container.append(n.add(i))}}),_mfpOn(CHANGE_EVENT+n,function(){mfp._preloadTimeout&&clearTimeout(mfp._preloadTimeout),mfp._preloadTimeout=setTimeout(function(){mfp.preloadNearbyImages(),mfp._preloadTimeout=null},16)}),_mfpOn(CLOSE_EVENT+n,function(){_document.off(n),mfp.wrap.off("click"+n),mfp.arrowRight=mfp.arrowLeft=null})},next:function(){mfp.direction=!0,mfp.index=t(mfp.index+1),mfp.updateItemHTML()},prev:function(){mfp.direction=!1,mfp.index=t(mfp.index-1),mfp.updateItemHTML()},goTo:function(e){mfp.direction=e>=mfp.index,mfp.index=e,mfp.updateItemHTML()},preloadNearbyImages:function(){var e,t=mfp.st.gallery.preload,r=Math.min(t[0],mfp.items.length),n=Math.min(t[1],mfp.items.length);for(e=1;e<=(mfp.direction?n:r);e++)mfp._preloadItem(mfp.index+e);for(e=1;e<=(mfp.direction?r:n);e++)mfp._preloadItem(mfp.index-e)},_preloadItem:function(r){if(r=t(r),!mfp.items[r].preloaded){var n=mfp.items[r];n.parsed||(n=mfp.parseEl(r)),_mfpTrigger("LazyLoad",n),"image"===n.type&&(n.img=e('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,_mfpTrigger("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}}})});
//# sourceMappingURL=sourcemaps/gallery.js.map
