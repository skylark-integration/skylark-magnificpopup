/**
 * skylark-magnificpopup - A version of magnificpopup that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-magnificpopup/
 * @license MIT
 */
define(["skylark-jquery","./core"],function(e){var i;e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var i=mfp.st.image,a=".image";mfp.types.push("image"),_mfpOn(OPEN_EVENT+a,function(){"image"===mfp.currItem.type&&i.cursor&&e(document.body).addClass(i.cursor)}),_mfpOn(CLOSE_EVENT+a,function(){i.cursor&&e(document.body).removeClass(i.cursor),_window.off("resize"+EVENT_NS)}),_mfpOn("Resize"+a,mfp.resizeImage),mfp.isLowIE&&_mfpOn("AfterChange",mfp.resizeImage)},resizeImage:function(){var e=mfp.currItem;if(e&&e.img&&mfp.st.image.verticalFit){var i=0;mfp.isLowIE&&(i=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",mfp.wH-i)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,i&&clearInterval(i),e.isCheckingImgSize=!1,_mfpTrigger("ImageHasSize",e),e.imgHidden&&(mfp.content&&mfp.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var a=0,r=e.img[0],m=function(t){i&&clearInterval(i),i=setInterval(function(){r.naturalWidth>0?mfp._onImageHasSize(e):(a>200&&clearInterval(i),3===++a?m(10):40===a?m(50):100===a&&m(500))},t)};m(1)},getImage:function(a,r){var m=0,t=function(){a&&(a.img[0].complete?(a.img.off(".mfploader"),a===mfp.currItem&&(mfp._onImageHasSize(a),mfp.updateStatus("ready")),a.hasSize=!0,a.loaded=!0,_mfpTrigger("ImageLoadComplete")):++m<200?setTimeout(t,100):o())},o=function(){a&&(a.img.off(".mfploader"),a===mfp.currItem&&(mfp._onImageHasSize(a),mfp.updateStatus("error",f.tError.replace("%url%",a.src))),a.hasSize=!0,a.loaded=!0,a.loadError=!0)},f=mfp.st.image,n=r.find(".mfp-img");if(n.length){var s=document.createElement("img");s.className="mfp-img",a.el&&a.el.find("img").length&&(s.alt=a.el.find("img").attr("alt")),a.img=e(s).on("load.mfploader",t).on("error.mfploader",o),s.src=a.src,n.is("img")&&(a.img=a.img.clone()),(s=a.img[0]).naturalWidth>0?a.hasSize=!0:s.width||(a.hasSize=!1)}return mfp._parseMarkup(r,{title:function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var a=mfp.st.image.titleSrc;if(a){if(e.isFunction(a))return a.call(mfp,i);if(i.el)return i.el.attr(a)||""}return""}(a),img_replaceWith:a.img},a),mfp.resizeImage(),a.hasSize?(i&&clearInterval(i),a.loadError?(r.addClass("mfp-loading"),mfp.updateStatus("error",f.tError.replace("%url%",a.src))):(r.removeClass("mfp-loading"),mfp.updateStatus("ready")),r):(mfp.updateStatus("loading"),a.loading=!0,a.hasSize||(a.imgHidden=!0,r.addClass("mfp-loading"),mfp.findImageSize(a)),r)}}})});
//# sourceMappingURL=sourcemaps/image.js.map
