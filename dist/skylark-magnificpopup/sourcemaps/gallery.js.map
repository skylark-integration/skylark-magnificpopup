{"version":3,"sources":["gallery.js"],"names":["define","$","_getLoopedId","index","numSlides","mfp","items","length","_replaceCurrTotal","text","curr","total","replace","magnificPopup","registerModule","options","enabled","arrowMarkup","preload","navigateByImgClick","arrows","tPrev","tNext","tCounter","proto","initGallery","gSt","st","gallery","ns","direction","_wrapClasses","_mfpOn","OPEN_EVENT","wrap","on","next","_document","e","keyCode","prev","data","currItem","MARKUP_PARSE_EVENT","element","values","item","l","counter","arrowLeft","markup","addClass","PREVENT_CLOSE_CLASS","arrowRight","click","container","append","add","CHANGE_EVENT","_preloadTimeout","clearTimeout","setTimeout","preloadNearbyImages","CLOSE_EVENT","off","updateItemHTML","goTo","newIndex","i","p","preloadBefore","Math","min","preloadAfter","_preloadItem","preloaded","parsed","parseEl","_mfpTrigger","type","img","hasSize","loadError","attr","src"],"mappings":"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","file":"../gallery.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"./core\"\n],function($) {\n\n\t/**\n\t * Get looped index depending on number of slides\n\t */\n\tvar _getLoopedId = function(index) {\n\t\t\tvar numSlides = mfp.items.length;\n\t\t\tif(index > numSlides - 1) {\n\t\t\t\treturn index - numSlides;\n\t\t\t} else  if(index < 0) {\n\t\t\t\treturn numSlides + index;\n\t\t\t}\n\t\t\treturn index;\n\t\t},\n\t\t_replaceCurrTotal = function(text, curr, total) {\n\t\t\treturn text.replace(/%curr%/gi, curr + 1).replace(/%total%/gi, total);\n\t\t};\n\n\t$.magnificPopup.registerModule('gallery', {\n\n\t\toptions: {\n\t\t\tenabled: false,\n\t\t\tarrowMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\n\t\t\tpreload: [0,2],\n\t\t\tnavigateByImgClick: true,\n\t\t\tarrows: true,\n\n\t\t\ttPrev: 'Previous (Left arrow key)',\n\t\t\ttNext: 'Next (Right arrow key)',\n\t\t\ttCounter: '%curr% of %total%'\n\t\t},\n\n\t\tproto: {\n\t\t\tinitGallery: function() {\n\n\t\t\t\tvar gSt = mfp.st.gallery,\n\t\t\t\t\tns = '.mfp-gallery';\n\n\t\t\t\tmfp.direction = true; // true - next, false - prev\n\n\t\t\t\tif(!gSt || !gSt.enabled ) return false;\n\n\t\t\t\t_wrapClasses += ' mfp-gallery';\n\n\t\t\t\t_mfpOn(OPEN_EVENT+ns, function() {\n\n\t\t\t\t\tif(gSt.navigateByImgClick) {\n\t\t\t\t\t\tmfp.wrap.on('click'+ns, '.mfp-img', function() {\n\t\t\t\t\t\t\tif(mfp.items.length > 1) {\n\t\t\t\t\t\t\t\tmfp.next();\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t_document.on('keydown'+ns, function(e) {\n\t\t\t\t\t\tif (e.keyCode === 37) {\n\t\t\t\t\t\t\tmfp.prev();\n\t\t\t\t\t\t} else if (e.keyCode === 39) {\n\t\t\t\t\t\t\tmfp.next();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t_mfpOn('UpdateStatus'+ns, function(e, data) {\n\t\t\t\t\tif(data.text) {\n\t\t\t\t\t\tdata.text = _replaceCurrTotal(data.text, mfp.currItem.index, mfp.items.length);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t_mfpOn(MARKUP_PARSE_EVENT+ns, function(e, element, values, item) {\n\t\t\t\t\tvar l = mfp.items.length;\n\t\t\t\t\tvalues.counter = l > 1 ? _replaceCurrTotal(gSt.tCounter, item.index, l) : '';\n\t\t\t\t});\n\n\t\t\t\t_mfpOn('BuildControls' + ns, function() {\n\t\t\t\t\tif(mfp.items.length > 1 && gSt.arrows && !mfp.arrowLeft) {\n\t\t\t\t\t\tvar markup = gSt.arrowMarkup,\n\t\t\t\t\t\t\tarrowLeft = mfp.arrowLeft = $( markup.replace(/%title%/gi, gSt.tPrev).replace(/%dir%/gi, 'left') ).addClass(PREVENT_CLOSE_CLASS),\n\t\t\t\t\t\t\tarrowRight = mfp.arrowRight = $( markup.replace(/%title%/gi, gSt.tNext).replace(/%dir%/gi, 'right') ).addClass(PREVENT_CLOSE_CLASS);\n\n\t\t\t\t\t\tarrowLeft.click(function() {\n\t\t\t\t\t\t\tmfp.prev();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tarrowRight.click(function() {\n\t\t\t\t\t\t\tmfp.next();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tmfp.container.append(arrowLeft.add(arrowRight));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t_mfpOn(CHANGE_EVENT+ns, function() {\n\t\t\t\t\tif(mfp._preloadTimeout) clearTimeout(mfp._preloadTimeout);\n\n\t\t\t\t\tmfp._preloadTimeout = setTimeout(function() {\n\t\t\t\t\t\tmfp.preloadNearbyImages();\n\t\t\t\t\t\tmfp._preloadTimeout = null;\n\t\t\t\t\t}, 16);\n\t\t\t\t});\n\n\n\t\t\t\t_mfpOn(CLOSE_EVENT+ns, function() {\n\t\t\t\t\t_document.off(ns);\n\t\t\t\t\tmfp.wrap.off('click'+ns);\n\t\t\t\t\tmfp.arrowRight = mfp.arrowLeft = null;\n\t\t\t\t});\n\n\t\t\t},\n\t\t\tnext: function() {\n\t\t\t\tmfp.direction = true;\n\t\t\t\tmfp.index = _getLoopedId(mfp.index + 1);\n\t\t\t\tmfp.updateItemHTML();\n\t\t\t},\n\t\t\tprev: function() {\n\t\t\t\tmfp.direction = false;\n\t\t\t\tmfp.index = _getLoopedId(mfp.index - 1);\n\t\t\t\tmfp.updateItemHTML();\n\t\t\t},\n\t\t\tgoTo: function(newIndex) {\n\t\t\t\tmfp.direction = (newIndex >= mfp.index);\n\t\t\t\tmfp.index = newIndex;\n\t\t\t\tmfp.updateItemHTML();\n\t\t\t},\n\t\t\tpreloadNearbyImages: function() {\n\t\t\t\tvar p = mfp.st.gallery.preload,\n\t\t\t\t\tpreloadBefore = Math.min(p[0], mfp.items.length),\n\t\t\t\t\tpreloadAfter = Math.min(p[1], mfp.items.length),\n\t\t\t\t\ti;\n\n\t\t\t\tfor(i = 1; i <= (mfp.direction ? preloadAfter : preloadBefore); i++) {\n\t\t\t\t\tmfp._preloadItem(mfp.index+i);\n\t\t\t\t}\n\t\t\t\tfor(i = 1; i <= (mfp.direction ? preloadBefore : preloadAfter); i++) {\n\t\t\t\t\tmfp._preloadItem(mfp.index-i);\n\t\t\t\t}\n\t\t\t},\n\t\t\t_preloadItem: function(index) {\n\t\t\t\tindex = _getLoopedId(index);\n\n\t\t\t\tif(mfp.items[index].preloaded) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar item = mfp.items[index];\n\t\t\t\tif(!item.parsed) {\n\t\t\t\t\titem = mfp.parseEl( index );\n\t\t\t\t}\n\n\t\t\t\t_mfpTrigger('LazyLoad', item);\n\n\t\t\t\tif(item.type === 'image') {\n\t\t\t\t\titem.img = $('<img class=\"mfp-img\" />').on('load.mfploader', function() {\n\t\t\t\t\t\titem.hasSize = true;\n\t\t\t\t\t}).on('error.mfploader', function() {\n\t\t\t\t\t\titem.hasSize = true;\n\t\t\t\t\t\titem.loadError = true;\n\t\t\t\t\t\t_mfpTrigger('LazyLoadError', item);\n\t\t\t\t\t}).attr('src', item.src);\n\t\t\t\t}\n\n\n\t\t\t\titem.preloaded = true;\n\t\t\t}\n\t\t}\n\t});\n});\t"]}