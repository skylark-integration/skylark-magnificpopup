{"version":3,"sources":["retina.js"],"names":["define","$","magnificPopup","registerModule","options","replaceSrc","item","src","replace","m","ratio","proto","initRetina","window","devicePixelRatio","st","mfp","retina","isNaN","_mfpOn","e","img","css","max-width","naturalWidth","width"],"mappings":";;;;;;;AAAAA,QACC,iBACA,UACC,SAASC,GAIXA,EAAEC,cAAcC,eAFA,UAGfC,SACCC,WAAY,SAASC,GACpB,OAAOA,EAAKC,IAAIC,QAAQ,SAAU,SAASC,GAAK,MAAO,MAAQA,KAEhEC,MAAO,GAERC,OACCC,WAAY,WACX,GAAGC,OAAOC,iBAAmB,EAAG,CAE/B,IAAIC,EAAKC,IAAID,GAAGE,OACfP,EAAQK,EAAGL,OAEZA,EAASQ,MAAMR,GAAiBA,IAARA,GAEb,IACVS,OAAO,sBAAkC,SAASC,EAAGd,GACpDA,EAAKe,IAAIC,KACRC,YAAajB,EAAKe,IAAI,GAAGG,aAAed,EACxCe,MAAS,WAGXN,OAAO,sBAAkC,SAASC,EAAGd,GACpDA,EAAKC,IAAMQ,EAAGV,WAAWC,EAAMI","file":"../retina.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"./core\"\n],function($) {\n\nvar RETINA_NS = 'retina';\n\n$.magnificPopup.registerModule(RETINA_NS, {\n\toptions: {\n\t\treplaceSrc: function(item) {\n\t\t\treturn item.src.replace(/\\.\\w+$/, function(m) { return '@2x' + m; });\n\t\t},\n\t\tratio: 1 // Function or number.  Set to 1 to disable.\n\t},\n\tproto: {\n\t\tinitRetina: function() {\n\t\t\tif(window.devicePixelRatio > 1) {\n\n\t\t\t\tvar st = mfp.st.retina,\n\t\t\t\t\tratio = st.ratio;\n\n\t\t\t\tratio = !isNaN(ratio) ? ratio : ratio();\n\n\t\t\t\tif(ratio > 1) {\n\t\t\t\t\t_mfpOn('ImageHasSize' + '.' + RETINA_NS, function(e, item) {\n\t\t\t\t\t\titem.img.css({\n\t\t\t\t\t\t\t'max-width': item.img[0].naturalWidth / ratio,\n\t\t\t\t\t\t\t'width': '100%'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t_mfpOn('ElementParse' + '.' + RETINA_NS, function(e, item) {\n\t\t\t\t\t\titem.src = st.replaceSrc(item, ratio);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n});"]}